# Modelagem do Banco de Dados

Esse arquivo contempla a modelagem inicial do banco de dados baseada nos requisitos conversados com o parceiro e necessidades do projeto.

![Modelagem do banco de dados](<../static/img/modelagem_banco_de_dados.png>)

Seguem descrições das tabelas e atributos. É válido ressaltar que isso será aplicado no contexto do NoSql usando DynamoDB.

## Tabelas

### `users`
Esta tabela armazena as informações dos usuários do sistema, podendo ser tanto administradores, clientes ou operadores.

- **id**: Identificador único do usuário (_bigint_).
- **role**: Define o papel do usuário no sistema (_enum_: `admin`, `client`, `operator`).
- **name**: Nome do usuário (_char_).
- **email**: Email do usuário (_char_).
- **password**: Senha criptografada do usuário (_char_).
- **xp**: Quantidade de "xp" adquirido pelo usuário ao fazer compras na plataforma (_bigint_)
- **level**: O nível do usuário, que pode dar descontos e outros benefícios (_bigint_)

### `orders`
Esta tabela armazena os pedidos realizados pelos clientes.

- **id**: Identificador único do pedido (_bigint_).
- **client_id**: Referência ao cliente que realizou o pedido (_bigint_).
- **_sticker__id**: Referência ao _sticker_ comprado (_bigint_). Pode ser nulo se o pedido for de uma etiqueta personalizada.
- **personalized**: Define se a etiqueta é personalizada (boolean).
- **date**: Data e hora do pedido (datetime).
- **preparing**: Indica se o pedido está em preparação (boolean).
- **delivered**: Indica se o pedido foi entregue (boolean).
- **finished**: Indica se o pedido foi finalizado (boolean).

### `__sticker_s_`
Esta tabela armazena os adesivos disponíveis para compra.

- **id**: Identificador único do _sticker_ (_bigint_).
- **name**: Nome do _sticker_ (_char_).
- **description**: Descrição do _sticker_ (_char_).
- **price**: Preço do _sticker_ (double).
- **width**: Largura do _sticker_ (_bigint_).
- **height**: Altura do _sticker_ (_bigint_).
- **paperType**: Tipo de papel do _sticker_ (_enum_: `couche`, `bopp`, etc.).
- **color**: Cor principal do _sticker_ (_enum_).
- **shape**: Formato do _sticker_ (_enum_: `square`, `circle`, etc.).
- **promotion_id**: Referência a uma promoção ativa, se houver (_bigint_).

> ⚠️ **Nota:** Os atributos dos __sticker_s_ estão sujeitos a refatoração após discussões com o cliente.

### `promotions`
Esta tabela armazena as promoções aplicáveis aos __sticker_s_.

- **id**: Identificador único da promoção (_bigint_).
- **name**: Nome da promoção (_char_).
- **description**: Descrição da promoção (_char_).
- **start_date**: Data de início da promoção (date).
- **end_date**: Data de término da promoção (date).
- **%_of_discount**: Percentual de desconto aplicado (double).

> Um **_sticker_** pode ter uma promoção associada, enquanto uma **promoção** pode ser aplicada a vários __sticker_s_.

---

## Considerações Futuras

- **Sistema de Pagamentos**: Ainda está pendente a definição de um sistema de pagamentos e a adição de atributos relacionados na tabela `orders`. Pesquisas estão sendo realizadas para determinar os melhores atributos a serem incluídos (por exemplo, status de pagamento, métodos de pagamento, etc.).
- **Etiquetas Personalizadas**: Quando o pedido for de uma etiqueta personalizada, o campo `_sticker__id` na tabela `orders` será nulo.
